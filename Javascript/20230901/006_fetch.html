<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fetch</title>
</head>

<body>
    <script>
        //XHR과 fetch의 차이점 : XMLHttpRequest가 생성하는 인스턴스는 통신의 기능을 수행하는 XMLHttpRequest 객체를 반환했지만 fetch는 인스턴스를 만들지 않고, 대신 ‘약속(promise)’을 반환
        // promise 객체는 비동기 작업이 맞이 할 미래의 완료 또는 실패와 그 결과 값을 나타냄
        // (최종 결과를 반환하는 것이 아니고, 미래의 어떤 시점에 결과를 제공하겠다는 '약속'(프로미스)을 반환)
        // json() 메소드를 통해 자바스크립트 객체로 변환이 가능한 promise 객체를 반환받을 수 있다.

        fetch('https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json').then((response) => {
            console.log(response.ok);
            if (!response.ok) {
                // response.ok 는 응답이 성공적(200-299)일 경우 true, 아니면 false를 반환
                throw new Error(`HTTP ERROR!! State: ${response.status}`);
                // throw는 에러를 바로 던져준다. !!예외처리는 반드시 필요하다!!
            }

            return response.json();

        })
            .then((data) => {
                console.log(data);
                return data;
            })
            .catch((error) => {
                console.error(error);
            })
    </script>
</body>

</html>